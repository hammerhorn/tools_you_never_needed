#!/usr/bin/env python3
#coding=utf8
"""
Use toilet & cowsay
"""
import os
import subprocess
import sys

import textwidgets

COWS_FOLDER = '/usr/share/cowsay/cows'

COW_LIST = [cow[:-4] for cow in  os.listdir(COWS_FOLDER)]
COW_LIST.sort()

def define_text():
    """
    Use  /usr/games/fortunes if present.  Otherise, read from
    command-line args.
    """
    try:
        text = subprocess.check_output('fortune -s', shell=True)
    except (OSError, subprocess.CalledProcessError):
        try:
            text = sys.argv[1]
        except IndexError:
            textwidgets.message('use: cowscript [message]')
            sys.exit()
    return text.strip().decode('utf8')


class Cow():
    """
    access cowsay functionality
    """
    def __init__(self, cow_name='default'):
        self.name = cow_name

    def __str__(self):
        out_str = subprocess.check_output(
            f'cowsay -f {self.name} " "', shell=True)
        return str(out_str, 'UTF-8')

    def output(self, text, get_str=False):
        """
        output from cowsay
        """
        out_str = subprocess.check_output(
            f'cowsay -f {self.name} "{text}"', shell=True)
        out_str = f"\n{out_str.decode('utf8')}"
        if get_str:
            return out_str
        print(out_str)
        return None
